bundle:
  name: next-js-demo-app-v1

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://dbc-31c5d9f2-0ea0.cloud.databricks.com/
    resources:
      apps:
        hello-world-app:
          name: "hello-world-app-dev"
  prod:
    mode: production
    workspace:
      host: https://dbc-31c5d9f2-0ea0.cloud.databricks.com/
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
    permissions:
      - user_name: ${workspace.current_user.userName}
        level: CAN_MANAGE

resources:
  apps:
    hello-world-app:
      name: hello-world-app
      description: "A Hello World Next.js App"
      source_code_path: .
      command: ["npm", "run", "build-start"]
      env:
        NODE_ENV: production
